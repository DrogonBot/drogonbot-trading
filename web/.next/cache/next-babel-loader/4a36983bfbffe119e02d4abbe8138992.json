{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Router from 'next/router';\nimport { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport styled from 'styled-components';\nimport { ProvinceSelector } from '../components/elements/form/ProvinceSelector';\nimport { Header } from '../components/pages/index/Header';\nimport { Logo } from '../components/pages/index/Logo';\nimport { NextSEOIndex } from '../components/seo/NextSEOIndex';\nimport { appEnv } from '../constants/Env.constant';\nimport { colors } from '../constants/UI/Colors.constant';\nimport { UI } from '../constants/UI/UI.constant';\nimport { TS } from '../helpers/LanguageHelper';\nimport { loadCountryProvinces } from '../store/actions/form.actions';\nimport { postClearAll } from '../store/actions/post.action';\nimport { setSearchKey } from '../store/actions/ui.action';\n\nvar Home = function Home(props) {\n  var _useState = useState(\"\"),\n      hookSearchField = _useState[0],\n      hookSetSearchField = _useState[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.uiReducer;\n  }),\n      searchProvince = _useSelector.searchProvince;\n\n  var dispatch = useDispatch();\n\n  var onSubmit = function onSubmit(e) {\n    return _regeneratorRuntime.async(function onSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(\"Submitting search\");\n            e.preventDefault(); // validate and set our keyword to the state\n\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(dispatch(setSearchKey(\"searchKeyword\", hookSearchField)));\n\n          case 4:\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(dispatch(postClearAll()));\n\n          case 6:\n            // clear post state, if present.\n            Router.push({\n              pathname: \"/posts\",\n              query: {\n                searchProvince: searchProvince,\n                searchKeyword: hookSearchField\n              }\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return __jsx(React.Fragment, null, __jsx(NextSEOIndex, null), __jsx(Header, null), __jsx(MainContainer, null, __jsx(Logo, null), __jsx(Form, {\n    id: \"search-form\",\n    onSubmit: onSubmit\n  }, __jsx(SearchBarContainer, null, __jsx(ProvinceSelector, {\n    provinces: props.provinces\n  }), __jsx(SearchInput, {\n    type: \"text\",\n    placeholder: TS.string(\"form\", \"indexSearchInput\"),\n    name: \"q\",\n    value: hookSearchField,\n    onChange: function onChange(e) {\n      hookSetSearchField(e.target.value);\n    }\n  })), __jsx(BlueSearchButton, {\n    type: \"submit\",\n    form: \"search-form\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: faSearch\n  })), __jsx(CTAButtonsContainer, null, __jsx(SearchLargeDeviceButton, {\n    type: \"submit\",\n    form: \"search-form\"\n  }, TS.string(\"landing\", \"searchButton\"))))));\n};\n\nexport default Home;\n\nHome.getInitialProps = function _callee(ctx) {\n  var provinces;\n  return _regeneratorRuntime.async(function _callee$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(ctx.store.dispatch(loadCountryProvinces(appEnv.appCountry)));\n\n        case 2:\n          provinces = ctx.store.getState().formReducer.states;\n          return _context2.abrupt(\"return\", {\n            provinces: provinces\n          });\n\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nvar MainContainer = styled.main.withConfig({\n  displayName: \"pages__MainContainer\",\n  componentId: \"sc-107eczz-0\"\n})([\"margin-top:75px;i{color:white;}@media screen and (min-width:750px){margin-top:150px;}\"]);\nvar SearchBarContainer = styled.div.withConfig({\n  displayName: \"pages__SearchBarContainer\",\n  componentId: \"sc-107eczz-1\"\n})([\"display:flex;flex-wrap:wrap;flex-direction:row;position:relative;flex:10;.MuiInput-root{position:absolute;top:0;left:21px;height:100%;}\"]);\nvar Form = styled.form.withConfig({\n  displayName: \"pages__Form\",\n  componentId: \"sc-107eczz-2\"\n})([\"width:95%;max-width:550px;display:flex;margin:15px auto;position:relative;button,input{outline:none;}\"]);\nvar SearchInput = styled.input.withConfig({\n  displayName: \"pages__SearchInput\",\n  componentId: \"sc-107eczz-3\"\n})([\"flex-grow:1;border:1px solid #d9d9d9;padding:0.7em;flex:8;padding-left:6rem;@media screen and (max-width:\", \"px){border-top-left-radius:24px;border-bottom-left-radius:24px;}@media screen and (min-width:\", \"px){border-radius:24px;}\"], UI.mediumLayoutBreak, UI.mediumLayoutBreak);\nvar BlueSearchButton = styled.button.withConfig({\n  displayName: \"pages__BlueSearchButton\",\n  componentId: \"sc-107eczz-4\"\n})([\"margin-left:-5px;border-radius:0 3px 3px 0;background-color:\", \";border:1px solid \", \";padding:0.7em;z-index:1;@media screen and (min-width:\", \"px){display:none;}svg{color:white;}\"], colors.primary, colors.primaryDark, UI.mediumLayoutBreak);\nvar CTAButtonsContainer = styled.div.withConfig({\n  displayName: \"pages__CTAButtonsContainer\",\n  componentId: \"sc-107eczz-5\"\n})([\"@media screen and (max-width:749px){display:none;}@media screen and (min-width:750px){font-family:arial,sans-serif;position:absolute;top:70px;width:260px;left:0;right:0;margin:0 auto;font-size:medium;justify-content:center;display:flex;button{color:#757575;background-color:#f2f2f2;height:36px;font-size:0.8em;font-weight:bold;border:1px solid #f2f2f2;border-radius:2px;}}\"]);\nvar SearchLargeDeviceButton = styled.button.withConfig({\n  displayName: \"pages__SearchLargeDeviceButton\",\n  componentId: \"sc-107eczz-6\"\n})([\"@media screen and (min-width:750px){margin-right:0.5em;}\"]);","map":null,"metadata":{},"sourceType":"module"}